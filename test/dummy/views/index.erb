<% if @success && @image_title %>
  <h1>Success!</h1>
  <img src=<%= @image_title.url.inspect %> alt=<%= @image_title.text.inspect %>/>
<% elsif @success === false %>
  <h1>Failed.</h1>
<% else %>
  <%= MagickTitle.say("Hello!").to_html %>
  <h2><%= MagickTitle.say("Welcome to MagickTitle!", :cache => false, :font => 'PermanentMarker.ttf', :font_size => 20, :color => '#999').to_html(false) %></h2>
<% end %>


<h2>Generate an image title!</h2>

<form action="/" method="post">
  <p>
    <label for="text">Text:</label><br/>
    <textarea name="text" id="name" rows="5" cols="50"><%= params[:text] %></textarea>
  </p>
  <p>
    <label for="options_font">Font:</label>
    <select name="options[font]" id="options_font">
      <% Dir.entries(MagickTitle.options.font_path).reject!{|f| f.match(/\.+$/) }.each do |font| %>    
        <option value="<%= font %>"><%= font.gsub(/\.[a-z]{3}/, '') %></option>
      <% end %>
    </select>
  </p>
  
  <p>
    <label for="options_color">Color:</label>
    <select name="options[color]" id="options_color">
      <option value="#ff0000">Red</option>
      <option value="#0000ff">Blue</option>
      <option value="#00ff00">Green</option>
      <option value="#000000">Black</option>
      <option value="#aaaaaa">Gray</option>
    </select>
  </p>
  
  <p>
    <label for="options_font_size">Font Size:</label>
    <select name="options[font_size]" id="options_font_size">
      <option value="15">15</option>
      <option value="25">25</option>
      <option value="40" selected="selected">40</option>
      <option value="100">100</option>
      <option value="200">200</option>
    </select>
  </p>
  
  <p>
    <label for="options_kerning">Kerning:</label>
    <select name="options[kerning]" id="options_kerning">
      <option value="-10">-10</option>
      <option value="-5">-5</option>
      <option value="-2">-2</option>
      <option value="0" selected="selected">0</option>
      <option value="2">2</option>
      <option value="5">5</option>
      <option value="10">10</option>
    </select>
  </p>
  
  <p>
    <input type="submit" value="generate"/>
  </p>
</form>